<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学习越南语请联系Wx:XiDeYueNanYu</title>
    <style>
        body {
            background-color: #f7fbf3;
            margin-bottom: 60px;
        }
        #infoBox { 
            width: 100%; 
            max-width: 700px;
            height: 100px; 
            margin: 0 auto; 
            border: 1px solid #ccc; 
            background: #68838B; 
            color: #D2B48C; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: clamp(40px, 5vw, 60px);
            font-weight: bold;
        }
        #contactBox { 
            width: 100%; 
            max-width: 700px;
            height: 45px; 
            margin: 0px auto; 
            border: 1px solid #ccc; 
            background: #68838B; 
            color: #D2B48C; 
            display: flex; 
            align-items: center; 
            justify-content: left; 
            padding-left: 20px;
            font-size: clamp(12px, 2vw, 15px); 
            font-weight: bold;
        }
        .image-frame {
            max-width: 700px;
            margin: 20px auto 0 auto;
            border: 10px solid #957652;
            border-radius: 10px;
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            display: none;
            overflow: hidden;
        }
        .image-frame img {
            width: 100%;
            height: auto;
            display: block;
        }
        .content-box {
            max-width: 700px;
            margin: 20px auto;
            padding: 50px;
            border: 10px solid #957652;
            border-radius: 10px;
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            font-size: 30px;
            font-family: Arial;
            color: #222322;
            line-height: 3;
            text-align: justify;
        }
        .translated-word {
            position: relative;
            display: inline-block;
            white-space: nowrap;
            line-height: 1.3;
            background-color: #bfcdbf;
            color: #000000;
            padding: 4px 4px;
            border-radius: 2px;
        }
        .translation {
            position: absolute;
            top: -29px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 18px;
            background-color: #eddabc;
            color: #313a2d;
            padding: 4px 4px;
            border-radius: 1px;
            white-space: nowrap;
            z-index: 1;
            line-height: 1;
        }
        .original {
            display: inline;
            line-height: 1;
        }
        .floating-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            text-align: center;
            display: block;
            z-index: 1000;
        }
        #audioPlayer {
            width: 100%;
            margin-bottom: 10px;
        }
        .time-row {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        .time-box-group {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .button-group {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .floating-controls p#timeDisplay {
            font-size: 28px;
            color: #FFFFFF;
            background-color: #000000;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0;
        }
        .floating-controls .time-box {
            font-size: 16px;
            color: #FFFFFF;
            background-color: #555555;
            padding: 5px 10px;
            border-radius: 5px;
            min-width: 60px;
        }
        .tua-buttons {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .control-button {
            width: 50px;
            height: 50px;
            background-color: #363535;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            display: inline-flex;
            justify-content: center;
            align-items: center;
        }
        .control-button:disabled {
            background-color: #888888;
            cursor: not-allowed;
        }
        .control-button:hover:not(:disabled) {
            background-color: #000000;
        }
        .pause-play-button {
            background-color: #FF4500;
        }
        .pause-play-button:hover {
            background-color: #CC3700;
        }
        .toggle-button {
            background-color: #4682B4;
        }
        .toggle-button:hover {
            background-color: #36648B;
        }
        .loop-button {
            background-color: #3c923c;
        }
        .loop-button:hover {
            background-color: #347d34;
        }
        .clear-button {
            background-color: #bc3f13;
        }
        .clear-button:hover {
            background-color: #d15124;
        }
        .active {
            background-color: #ffffff; 
            border-radius: 5px;
        }
        #quizContainer {
            display: none;
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            color: #53686f;
            font-size: 25px;
            font-weight: bold;
        }
        .question {
            margin-bottom: 20px;
            padding: 18px;
            color: #53686f;
            border: 5px solid #53686f;
            border-radius: 10px;
            background-color: #ffffff;
            font-size: 20px;
            font-weight: bold;
        }
        .options label {
            display: block;
            margin: 15px 0;
            cursor: pointer;
            color: #21292c;
            font-size: 16px;
            font-weight: bold;
        }
        #result {
            margin-top: 20px;
            padding: 10px;
            display: none;
            border: 5px solid #53686f;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            background-color: #ffffff;
            color: #007a33;
        }
        .wrong-answer {
            color: #f65936;
            margin: 10px 0;
            font-size: 16px;
            font-weight: bold;
        }
        #submitQuiz {
            font-family: Arial, sans-serif;
            padding: 10px 20px;
            border: 3px solid #53686f;
            background-color: #FF6820;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
        }
        #submitQuiz:hover {
            background-color: #ff844a;
        }
        #vocabContainer {
            display: none;
            max-width: 700px;
            margin: 20px auto;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        #vocabControls {
            position: fixed;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            width: 900px;
            background: #68838B;
            padding: 10px 0;
            box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            margin-bottom: 10px;
        }
        #vocabControls div {
            margin: 5px 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #vocabControls button {
            padding: 8px 8px;
            margin: 0 5px;
            cursor: pointer;
            border: 3px solid #5d757d;
            background: #0f1314;
            color: #fffbef;
            font-size: 28px;
            border-radius: 5px;
        }
        #sentenceNumber {
            width: 50px;
            padding: 10px;
            text-align: center;
            border: 3px solid #68838B;
            background: #FFAD5B;
            color: #000;
            border-radius: 10px;
            font-size: 16px;
            -moz-appearance: textfield;
        }
        #sentenceNumber::-webkit-inner-spin-button, 
        #sentenceNumber::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        #sentenceNumber:disabled {
            background: #eee;
        }
        .disabled {
            cursor: not-allowed;
            pointer-events: none;
        }
        .active-mode {
            border: 4px solid orange;
        }
        #vocabIndicator {
            width: 95%;
            max-width: 700px;
            min-height: 50px;
            margin: 10px auto;
            padding: 5px;
            border: 3px solid #734A2E;
            background: #ffffe0;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        #vocabOptionsContainer {
            width: 100%;
            max-width: 700px;
            margin: 10px auto;
        }
        .optionBtn {
            width: 95%;
            max-width: 700px;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #734A2E;
            background: #ffffff;
            color: #000;
            font-size: 30px;
            text-align: left;
            cursor: pointer;
            border-radius: 5px;
        }
        .optionBtn:hover {
            background: #D2E4C4;
        }
        .correct {
            background: #B7D7AA !important;
        }
        .wrong {
            background: #CE6D5E !important;
        }
        .floating-mode-bar {
            position: fixed;
            bottom: 0px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #68838B;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0px 5px rgba(0, 0, 0, 1);
            display: flex;
            justify-content: center;
            gap: 20px;
            z-index: 1000;
            width: 900px;
        }
        .mode-button {
            padding: 10px 20px;
            border: 0px solid #ccc;
            background: #95a8ad;
            color: #293437;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            transition: border-color 0.3s;
        }
        .mode-button.active {
            border: 2px solid #ffffff;
            background: #f0f0f0;
            color: #293437;
        }
        @media (max-width: 768px) { 
            body {
                margin-bottom: 200px;
            }
            #infoBox { 
                width: 90%; 
                height: 120px; 
                font-size: clamp(30px, 4vw, 40px);
            }
            #contactBox { 
                width: 90%; 
                height: 50px; 
                font-size: clamp(14px, 2vw, 16px);
            }
            .image-frame {
                width: 90%;
                margin: 10px auto 0 auto;
            }
            .content-box {
                margin: 10px auto;
                padding: 20px;
                padding-top: 50px;
                padding-bottom: 90px;
                font-size: 19px;
                line-height: 3.5;
            }
            .translated-word {
                padding: 3px 3px;
            }
            .translation {
                top: -25px;
                font-size: 13px;
            }
            .floating-controls {
                top: 10px;
                right: 10px;
                padding: 5px;
            }
            #vocabControls {
                width: 100%;
                bottom: 50px;
                padding: 5px 0;
            }
            #vocabControls button {
                padding: 6px 6px;
                font-size: 20px;
            }
            #sentenceNumber {
                width: 40px;
                padding: 8px;
                font-size: 14px;
            }
            #vocabIndicator {
                min-height: 40px;
            }
            .optionBtn {
                font-size: 20px;
                padding: 8px;
            }
            .floating-mode-bar {
                width: 100%;
            }
        }
        @media (max-width: 400px) {
            .control-button {
                width: 40px;
                height: 40px;
                font-size: 14px;
            }
            .floating-controls p#timeDisplay {
                font-size: 20px;
            }
            .floating-controls .time-box {
                font-size: 12px;
                min-width: 50px;
            }
        }
    </style>
</head>
<body>
    <div id="infoBox">习得越南语</div>
    <div id="contactBox">讲师-阮玉煌 | Weixin：XiDeYueNanYu</div>
    <div id="contentContainer">
        <div class="image-frame" id="imageFrame">
            <img id="contentImage" src="anhminhhoa.jpg" alt="Content Image">
        </div>
        <div class="content-box" id="content"></div>
    </div>
    <div id="quizContainer">
        <h1>回答下面问题</h1>
        <form id="quizForm">
            <div id="questions"></div>
            <button type="button" id="submitQuiz" onclick="checkAnswers()">提交</button>
        </form>
        <div id="result"></div>
    </div>
    <div id="vocabContainer">
        <div id="vocabIndicator"></div>
        <div id="vocabOptionsContainer"></div>
    </div>
    <div class="floating-controls" id="floatingControls">
        <audio id="audioPlayer" src="lesson.mp3" controls></audio>
        <div class="time-row">
            <p id="timeDisplay">00:00</p>
            <div class="time-box-group">
                <span class="time-box" id="loopStart">--:--</span>
                <span class="time-box" id="loopEnd">--:--</span>
            </div>
            <div class="button-group">
                <button class="control-button loop-button" id="loopButton">听</button>
                <button class="control-button clear-button" id="clearButton">删</button>
            </div>
        </div>
        <div class="tua-buttons">
            <button class="control-button" id="rewind5sButton">-5s</button>
            <button class="control-button" id="rewind1sButton">-1s</button>
            <button class="control-button" id="forward1sButton">+1s</button>
            <button class="control-button" id="forward5sButton">+5s</button>
        </div>
        <div class="action-buttons">
            <button class="control-button pause-play-button" id="pausePlayButton">播</button>
            <button class="control-button toggle-button" id="toggleControlsButton">藏</button>
        </div>
    </div>
    <div id="vocabControls">
        <div>
            <button id="prevBtn">◀</button>
            <input type="text" id="sentenceNumber" inputmode="numeric" pattern="[0-9]*">
            <button id="nextBtn">▶</button>
        </div>
        <div>
            <button id="showHideBtn" class="active-mode">显示-隐藏</button>
            <button id="replayBtn">再听一遍</button>
        </div>
    </div>
    <div class="floating-mode-bar">
        <button class="mode-button active" id="contentMode">内容</button>
        <button class="mode-button" id="quizMode">回答问题</button>
        <button class="mode-button" id="vocabMode">词汇</button>
    </div>

    <audio id="vocabAudio" src="audio.mp3"></audio>
    <audio id="correctAudio" src="Dung.mp3"></audio>
    <audio id="wrongAudio" src="Sai.mp3"></audio>

    <script>

const textContentData = [
    `ĂN UỐNG Ở HÀ NỘI
Bạn có thể tìm nơi ăn uống ở Hà Nội rất dễ dàng. Phố nào cũng có các quán ăn, nhà hàng với đầy đủ các món bình dân và món đặc sản.
Các món ăn Việt Nam không những ngon mà còn rẻ. Bạn có thể chọn nhiều món cùng một lúc mà không sợ béo, vì các món ăn có nhiều rau, nhiều vị chua, cay, hợp với khẩu vị của tất cả mọi người.
Nếu bạn chỉ có vài nghìn trong túi, bạn có thể chọn ăn ở quán bình dân với giá tiền vừa phải. Các quán ăn sinh viên rẻ hơn nhưng không ngon bằng.
Nếu bạn muốn tổ chức một bữa tiệc sang trọng, bạn có thể đến các nhà hàng hoặc khách sạn. Trên tầng thượng của nhiều khách sạn có những nhà hàng hoặc quán bar rất tuyệt vời – bạn có thể vừa ăn uống vừa ngắm cảnh thành phố.
Ở đâu, bạn cũng sẽ được phục vụ chu đáo.
Nhiều người nước ngoài rất thích nem rán và phở. Hai món này ngon, không đắt và khá phổ biến. Nếu bạn sống ở Hà Nội mà chưa ăn hai món này, thì hãy thử xem – chắc chắn bạn sẽ thích ngay.`
];
const dictionary = {
"ăn uống": "饮食",
"Hà Nội": "河内",
"dễ dàng": "容易",
"phố": "街道",
"quán ăn": "小吃店",
"nhà hàng": "餐厅",
"món": "菜肴",
"bình dân": "平民的",
"đặc sản": "特产",
"ngon": "美味",
"rẻ": "便宜",
"chọn": "选择",
"sợ": "害怕",
"béo": "胖",
"rau": "蔬菜",
"chua": "酸",
"cay": "辣",
"khẩu vị": "口味",
"túi": "钱包",
"quán bình dân": "平价餐馆",
"sinh viên": "学生",
"tổ chức": "举办",
"bữa tiệc": "宴会",
"sang trọng": "豪华",
"khách sạn": "酒店",
"tầng thượng": "顶层",
"quán bar": "酒吧",
"tuyệt vời": "很棒",
"ngắm cảnh": "观景",
"thành phố": "城市",
"phục vụ": "服务",
"chu đáo": "周到",
"người nước ngoài": "外国人",
"thích": "喜欢",
"nem rán": "炸春卷",
"phở": "河粉",
"phổ biến": "普遍",
"sống": "生活",
"thử": "尝试",
"chắc chắn": "肯定",
};
const quizData = [
    {
        question: "Theo bài đọc, đặc điểm nào của ẩm thực Việt Nam được cho là giúp người ăn không lo tăng cân?",
        options: ["Thực phẩm tươi sống và sạch sẽ", "Cách chế biến ít dầu mỡ", "Các món ăn chứa nhiều rau và có vị chua, cay", "Lượng calo thấp trong mỗi bữa ăn"],
        correct: "Các món ăn chứa nhiều rau và có vị chua, cay"
    },
    {
        question: "Điều nào sau đây không đúng với nội dung bài?",
        options: ["Ăn ở quán sinh viên có giá rẻ nhất nhưng chất lượng kém hơn", "Người nước ngoài thường không thích món ăn có vị cay", "Có thể ăn ở nhà hàng trên tầng cao và ngắm cảnh thành phố", "Các món ăn Việt Nam hợp khẩu vị với nhiều người"],
        correct: "Người nước ngoài thường không thích món ăn có vị cay"
    },
    {
        question: "Theo bài, nếu bạn có rất ít tiền, lựa chọn nào là hợp lý nhất để ăn uống?",
        options: ["Tổ chức tiệc tại nhà hàng sang trọng", "Mua đồ ăn sẵn tại siêu thị", "Đến các quán ăn bình dân hoặc quán sinh viên", "Ăn ở khách sạn cao cấp vào buổi tối"],
        correct: "Đến các quán ăn bình dân hoặc quán sinh viên"
    },
    {
        question: "Có thể suy ra lý do vì sao phở và nem rán được người nước ngoài yêu thích là vì:",
        options: ["Chúng chứa nhiều thịt và gia vị lạ", "Chúng đắt tiền nhưng chất lượng cao", "Chúng ngon, phổ biến và giá cả hợp lý", "Chúng là món ăn truyền thống được truyền thông quảng bá"],
        correct: "Chúng ngon, phổ biến và giá cả hợp lý"
    },
    {
        question: "Theo bài, một lợi thế của việc ăn ở nhà hàng trên tầng thượng khách sạn là gì?",
        options: ["Giá rẻ hơn so với các nhà hàng khác", "Có thể thưởng thức đồ ăn kết hợp với xem biểu diễn", "Vừa ăn uống vừa ngắm được toàn cảnh thành phố", "Nhân viên phục vụ có thể nói nhiều thứ tiếng"],
        correct: "Vừa ăn uống vừa ngắm được toàn cảnh thành phố"
    },
    {
        question: "Thái độ của tác giả đối với ẩm thực Hà Nội là gì?",
        options: ["Chê bai vì thiếu đa dạng và không hợp khẩu vị", "Trung lập, chỉ mang tính miêu tả thông tin", "Ngạc nhiên vì người nước ngoài thích món Việt", "Tích cực, thể hiện sự hài lòng và tự hào"],
        correct: "Tích cực, thể hiện sự hài lòng và tự hào"
    },
    {
        question: "Câu “Bạn có thể chọn nhiều món cùng một lúc mà không sợ béo” nhấn mạnh đặc điểm gì của ẩm thực Việt Nam?",
        options: ["Ngon và chế biến đơn giản", "Ít dầu mỡ và dinh dưỡng cân đối", "Đa dạng, nhẹ nhàng và phù hợp cho người ăn kiêng", "Chủ yếu là món chay không chứa chất béo"],
        correct: "Đa dạng, nhẹ nhàng và phù hợp cho người ăn kiêng"
    },
    {
        question: "Câu “Ở đâu, bạn cũng sẽ được phục vụ chu đáo” thể hiện điều gì về dịch vụ ăn uống ở Hà Nội?",
        options: ["Chỉ có ở nhà hàng cao cấp mới phục vụ tốt", "Sự chuyên nghiệp và thân thiện của nhân viên phục vụ", "Khách hàng thường phải tự phục vụ ở quán bình dân", "Chất lượng dịch vụ không đồng đều giữa các địa điểm"],
        correct: "Sự chuyên nghiệp và thân thiện của nhân viên phục vụ"
    },
    {
        question: "Vì sao các món ăn Việt Nam được xem là hợp khẩu vị với mọi người, theo bài?",
        options: ["Vì chúng có nhiều thịt và vị ngọt", "Vì cách nêm nếm phù hợp và có vị chua cay nhẹ", "Vì được chế biến theo khẩu vị phương Tây", "Vì được bán kèm với đồ uống có gas"],
        correct: "Vì cách nêm nếm phù hợp và có vị chua cay nhẹ"
    },
    {
        question: "Có thể suy ra lý do bài viết nhắc đến tầng thượng của khách sạn là gì?",
        options: ["Giới thiệu loại hình ăn uống kết hợp giải trí", "So sánh giá cả giữa các khách sạn khác nhau", "Cảnh báo nguy cơ về độ an toàn thực phẩm", "Phản ánh xu hướng ăn uống mới của giới trẻ"],
        correct: "Giới thiệu loại hình ăn uống kết hợp giải trí"
    },
    {
        question: "Từ “bình dân” trong cụm “quán ăn bình dân” có thể hiểu là gì trong ngữ cảnh bài?",
        options: ["Phục vụ đồ ăn truyền thống", "Dành cho người có thu nhập cao", "Có giá cả phải chăng và đơn giản", "Chỉ mở cửa vào buổi sáng"],
        correct: "Có giá cả phải chăng và đơn giản"
    },
    {
        question: "Mục đích chính của bài viết là gì?",
        options: ["Quảng bá văn hóa ăn uống truyền thống của người Hà Nội", "Phân tích kinh tế dịch vụ ăn uống theo từng khu vực", "So sánh giá cả giữa các loại hình ăn uống tại Việt Nam", "Đưa ra lời khuyên ăn kiêng dành cho người nước ngoài"],
        correct: "Quảng bá văn hóa ăn uống truyền thống của người Hà Nội"
    }
];
const sentences = [
    {
        "audioFile": "audio.mp3",
        "start": 0.767667,
        "end": 2.377667,
        "correctAnswer": "người nước ngoài",
        "translation": "外国人",
        "options": [
            "người nước ngoài",
            "ngừoi nước ngoài",
            "người nuớc ngoài",
            "người nước ngòai"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 2.787667,
        "end": 4.397667,
        "correctAnswer": "quán bình dân",
        "translation": "平价餐馆",
        "options": [
            "quán bình dân",
            "quán binh dân",
            "quán bình dãn",
            "quấn bình dân"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 4.837667,
        "end": 6.057667,
        "correctAnswer": "tầng thượng",
        "translation": "顶层",
        "options": [
            "tầng thượng",
            "tâng thượng",
            "tầng thưượng",
            "tầng thượngg"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 6.527667,
        "end": 7.697667,
        "correctAnswer": "sinh viên",
        "translation": "学生",
        "options": [
            "sinh viên",
            "sính viên",
            "sinh viẹn",
            "sinhn viên"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 8.127667,
        "end": 9.267667,
        "correctAnswer": "khách sạn",
        "translation": "酒店",
        "options": [
            "khách sạn",
            "khach sạn",
            "khách san",
            "khắch sạn"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 9.787667,
        "end": 10.977667,
        "correctAnswer": "nhà hàng",
        "translation": "餐厅",
        "options": [
            "nhà hàng",
            "nhả hàng",
            "nhà hảng",
            "nhà háng"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 11.497667,
        "end": 12.737667,
        "correctAnswer": "quán bar",
        "translation": "酒吧",
        "options": [
            "quán bar",
            "quấn bar",
            "quán bả",
            "quán barr"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 13.097667,
        "end": 14.247667,
        "correctAnswer": "ngắm cảnh",
        "translation": "观景",
        "options": [
            "ngắm cảnh",
            "ngám cảnh",
            "ngắm cành",
            "ngẫm cảnh"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 14.847667,
        "end": 16.187667,
        "correctAnswer": "thành phố",
        "translation": "城市",
        "options": [
            "thành phố",
            "thánh phố",
            "thành phô",
            "thànhn phố"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 16.607667,
        "end": 17.727667,
        "correctAnswer": "phục vụ",
        "translation": "服务",
        "options": [
            "phục vụ",
            "phuc vụ",
            "phục vù",
            "phục vũ"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 18.327667,
        "end": 19.617667,
        "correctAnswer": "chu đáo",
        "translation": "周到",
        "options": [
            "chu đáo",
            "chú đáo",
            "chu đao",
            "chu đat"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 19.977667,
        "end": 21.127667,
        "correctAnswer": "sang trọng",
        "translation": "豪华",
        "options": [
            "sang trọng",
            "sáng trọng",
            "sang trọn",
            "sang trộng"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 21.577667,
        "end": 22.747667,
        "correctAnswer": "bữa tiệc",
        "translation": "宴会",
        "options": [
            "bữa tiệc",
            "bưa tiệc",
            "bữa tiệcc",
            "bữa tiêc"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 23.227667,
        "end": 24.367667,
        "correctAnswer": "tổ chức",
        "translation": "举办",
        "options": [
            "tổ chức",
            "tố chức",
            "tổ chúc",
            "tổ chịch"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 24.817667,
        "end": 26.067667,
        "correctAnswer": "đặc sản",
        "translation": "特产",
        "options": [
            "đặc sản",
            "đăc sản",
            "đặc sẩn",
            "đặc sãn"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 26.487667,
        "end": 27.617667,
        "correctAnswer": "khẩu vị",
        "translation": "口味",
        "options": [
            "khẩu vị",
            "khâu vị",
            "khẩu vi",
            "khẫu vị"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 28.087667,
        "end": 29.257667,
        "correctAnswer": "quán ăn",
        "translation": "小吃店",
        "options": [
            "quán ăn",
            "quấn ăn",
            "quán ãn",
            "quán an"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 29.777667,
        "end": 31.017667,
        "correctAnswer": "bình dân",
        "translation": "平民的",
        "options": [
            "bình dân",
            "binh dân",
            "bình dãn",
            "bình đân"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 31.487667,
        "end": 32.767667,
        "correctAnswer": "tuyệt vời",
        "translation": "很棒",
        "options": [
            "tuyệt vời",
            "tuyêt vời",
            "tuyệt vòi",
            "tuyệt vơi"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 33.117667,
        "end": 34.347667,
        "correctAnswer": "dễ dàng",
        "translation": "容易",
        "options": [
            "dễ dàng",
            "dẽ dàng",
            "dễ dàngg",
            "dễ đàng"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 35.257667,
        "end": 36.577667,
        "correctAnswer": "nem rán",
        "translation": "炸春卷",
        "options": [
            "nem rán",
            "ném rán",
            "nem rạn",
            "nem rắn"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 36.997667,
        "end": 38.257667,
        "correctAnswer": "phổ biến",
        "translation": "普遍",
        "options": [
            "phổ biến",
            "phỗ biến",
            "phổ bién",
            "phổ biền"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 38.617667,
        "end": 39.847667,
        "correctAnswer": "chắc chắn",
        "translation": "肯定",
        "options": [
            "chắc chắn",
            "chăc chắn",
            "chắc chăn",
            "chấc chắn"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 40.327667,
        "end": 41.607667,
        "correctAnswer": "ăn uống",
        "translation": "饮食",
        "options": [
            "ăn uống",
            "ẫn uống",
            "ăn uông",
            "ăn uốngg"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 42.037667,
        "end": 43.147667,
        "correctAnswer": "Hà Nội",
        "translation": "河内",
        "options": [
            "Hà Nội",
            "Hả Nội",
            "Hà Nôi",
            "Hà Nọi"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 43.707667,
        "end": 44.707667,
        "correctAnswer": "phố",
        "translation": "街道",
        "options": [
            "phố",
            "phó",
            "phô",
            "phỏ"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 45.277667,
        "end": 46.247667,
        "correctAnswer": "món",
        "translation": "菜肴",
        "options": [
            "món",
            "môń",
            "mon",
            "mốn"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 46.867667,
        "end": 47.897667,
        "correctAnswer": "ngon",
        "translation": "美味",
        "options": [
            "ngon",
            "ngón",
            "ngọn",
            "ngòn"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 48.457667,
        "end": 49.357667,
        "correctAnswer": "rẻ",
        "translation": "便宜",
        "options": [
            "rẻ",
            "rẽ",
            "rẹ",
            "re"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 49.887667,
        "end": 50.767667,
        "correctAnswer": "chọn",
        "translation": "选择",
        "options": [
            "chọn",
            "chon",
            "chõn",
            "chơn"
        ]
    }
];

        // Xử lý hiển thị văn bản với từ điển
        const content = document.getElementById('content');
        function renderText() {
            let html = textContentData[0].replace(/\n/g, "<br>");
            const sortedKeys = Object.keys(dictionary).sort((a, b) => b.length - a.length);
            const replacements = [];

            sortedKeys.forEach(key => {
                const regex = new RegExp(`(\\b|[.,!?\\n\\s]|^)(${key.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})(\\b|[.,!?\\n\\s]|$)`, 'gi');
                let match;
                while ((match = regex.exec(html)) !== null) {
                    const start = match.index + match[1].length;
                    const end = start + match[2].length;
                    replacements.push({
                        start,
                        end,
                        original: match[2],
                        prefix: match[1],
                        suffix: match[3],
                        translation: dictionary[key]
                    });
                }
            });

            replacements.sort((a, b) => a.start - b.start);
            const filteredReplacements = [];
            let lastEnd = -1;
            for (const replacement of replacements) {
                if (replacement.start >= lastEnd) {
                    filteredReplacements.push(replacement);
                    lastEnd = replacement.end;
                }
            }

            for (let i = filteredReplacements.length - 1; i >= 0; i--) {
                const { start, end, original, prefix, suffix, translation } = filteredReplacements[i];
                const translatedHtml = `${prefix}<span class="translated-word"><span class="translation">${translation}</span><span class="original">${original}</span></span>${suffix}`;
                html = html.slice(0, start - prefix.length) + translatedHtml + html.slice(end + suffix.length);
            }

            content.innerHTML = html;
        }

        // Xử lý hiển thị ảnh
        const imageFrame = document.getElementById('imageFrame');
        const contentImage = document.getElementById('contentImage');
        const imageSrc = "anhminhhoa.jpg";
        function renderImage() {
            if (imageSrc) {
                contentImage.src = imageSrc;
                imageFrame.style.display = 'block';
            } else {
                imageFrame.style.display = 'none';
            }
        }

        // Xử lý audio và bảng điều khiển
        const audioPlayer = document.getElementById("audioPlayer");
        const floatingControls = document.getElementById("floatingControls");
        if (!floatingControls) {
            console.error('Không tìm thấy floatingControls');
        }
        const timeDisplay = floatingControls ? floatingControls.querySelector("#timeDisplay") : null;
        const loopStart = floatingControls ? floatingControls.querySelector("#loopStart") : null;
        const loopEnd = floatingControls ? floatingControls.querySelector("#loopEnd") : null;
        const loopButton = floatingControls ? floatingControls.querySelector("#loopButton") : null;
        const clearButton = floatingControls ? floatingControls.querySelector("#clearButton") : null;
        const rewind5sButton = floatingControls ? floatingControls.querySelector("#rewind5sButton") : null;
        const rewind1sButton = floatingControls ? floatingControls.querySelector("#rewind1sButton") : null;
        const forward1sButton = floatingControls ? floatingControls.querySelector("#forward1sButton") : null;
        const forward5sButton = floatingControls ? floatingControls.querySelector("#forward5sButton") : null;
        const pausePlayButton = floatingControls ? floatingControls.querySelector("#pausePlayButton") : null;
        const toggleControlsButton = floatingControls ? floatingControls.querySelector("#toggleControlsButton") : null;
        const tuaButtons = floatingControls ? floatingControls.querySelector(".tua-buttons") : null;

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function updateTimeDisplay(displayElement) {
            if (displayElement) {
                displayElement.textContent = formatTime(audioPlayer.currentTime);
            }
        }

        let customLoopStart = null;
        let customLoopEnd = null;
        let clickCount = 0;
        let isLooping = false;

        if (timeDisplay) {
            const updateInterval = setInterval(() => updateTimeDisplay(timeDisplay), 1000);
            timeDisplay.onclick = () => {
                if (audioPlayer.paused) {
                    clickCount++;
                    if (clickCount === 1) {
                        customLoopStart = audioPlayer.currentTime;
                        loopStart.textContent = formatTime(customLoopStart);
                    } else if (clickCount === 2) {
                        customLoopEnd = audioPlayer.currentTime;
                        if (customLoopEnd <= customLoopStart) {
                            customLoopEnd = null;
                            loopEnd.textContent = "--:--";
                        } else {
                            loopEnd.textContent = formatTime(customLoopEnd);
                        }
                        clickCount = 0;
                    }
                }
            };
        }

        if (audioPlayer) {
            audioPlayer.ontimeupdate = function() {
                updateTimeDisplay(timeDisplay);
                if (isLooping && customLoopStart !== null && customLoopEnd !== null) {
                    if (audioPlayer.currentTime >= customLoopEnd) {
                        audioPlayer.currentTime = customLoopStart;
                    }
                }
            };
        }

        if (rewind5sButton) {
            rewind5sButton.onclick = () => {
                if (!isLooping) {
                    audioPlayer.currentTime = Math.max(0, audioPlayer.currentTime - 5);
                    updateTimeDisplay(timeDisplay);
                }
            };
        }
        if (rewind1sButton) {
            rewind1sButton.onclick = () => {
                if (!isLooping) {
                    audioPlayer.currentTime = Math.max(0, audioPlayer.currentTime - 1);
                    updateTimeDisplay(timeDisplay);
                }
            };
        }
        if (forward1sButton) {
            forward1sButton.onclick = () => {
                if (!isLooping) {
                    audioPlayer.currentTime = Math.min(audioPlayer.duration, audioPlayer.currentTime + 1);
                    updateTimeDisplay(timeDisplay);
                }
            };
        }
        if (forward5sButton) {
            forward5sButton.onclick = () => {
                if (!isLooping) {
                    audioPlayer.currentTime = Math.min(audioPlayer.duration, audioPlayer.currentTime + 5);
                    updateTimeDisplay(timeDisplay);
                }
            };
        }

        if (pausePlayButton) {
            pausePlayButton.onclick = () => {
                if (audioPlayer.paused) {
                    audioPlayer.play();
                    pausePlayButton.textContent = "停";
                } else {
                    audioPlayer.pause();
                    pausePlayButton.textContent = "播";
                }
            };
        }

        if (loopButton) {
            loopButton.onclick = () => {
                if (customLoopStart !== null && customLoopEnd !== null) {
                    audioPlayer.currentTime = customLoopStart;
                    audioPlayer.play();
                    isLooping = true;
                    if (rewind5sButton) rewind5sButton.disabled = true;
                    if (rewind1sButton) rewind1sButton.disabled = true;
                    if (forward1sButton) forward1sButton.disabled = true;
                    if (forward5sButton) forward5sButton.disabled = true;
                }
            };
        }

        if (clearButton) {
            clearButton.onclick = () => {
                customLoopStart = null;
                customLoopEnd = null;
                if (loopStart) loopStart.textContent = "--:--";
                if (loopEnd) loopEnd.textContent = "--:--";
                clickCount = 0;
                isLooping = false;
                if (rewind5sButton) rewind5sButton.disabled = false;
                if (rewind1sButton) rewind1sButton.disabled = false;
                if (forward1sButton) forward1sButton.disabled = false;
                if (forward5sButton) forward5sButton.disabled = false;
            };
        }

        let controlsVisible = true;
        if (toggleControlsButton) {
            toggleControlsButton.onclick = () => {
                if (controlsVisible) {
                    if (timeDisplay) timeDisplay.style.display = "none";
                    if (tuaButtons) tuaButtons.style.display = "none";
                    if (pausePlayButton) pausePlayButton.style.display = "none";
                    if (loopStart) loopStart.style.display = "none";
                    if (loopEnd) loopEnd.style.display = "none";
                    if (loopButton) loopButton.style.display = "none";
                    if (clearButton) clearButton.style.display = "none";
                    toggleControlsButton.textContent = "示";
                    controlsVisible = false;
                } else {
                    if (timeDisplay) timeDisplay.style.display = "inline-block";
                    if (tuaButtons) tuaButtons.style.display = "flex";
                    if (pausePlayButton) pausePlayButton.style.display = "inline-flex";
                    if (loopStart) loopStart.style.display = "inline-block";
                    if (loopEnd) loopEnd.style.display = "inline-block";
                    if (loopButton) loopButton.style.display = "inline-flex";
                    if (clearButton) clearButton.style.display = "inline-flex";
                    toggleControlsButton.textContent = "藏";
                    controlsVisible = true;
                }
            };
        }

        if (audioPlayer) {
            audioPlayer.onpause = audioPlayer.onended = function() {
                if (pausePlayButton) pausePlayButton.textContent = "播";
            };
        }

        // Xử lý chế độ từ vựng
        const vocabAudio = document.getElementById('vocabAudio');
        const correctAudio = document.getElementById('correctAudio');
        const wrongAudio = document.getElementById('wrongAudio');
        const vocabIndicator = document.getElementById('vocabIndicator');
        const sentenceNumber = document.getElementById('sentenceNumber');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const replayBtn = document.getElementById('replayBtn');
        const showHideBtn = document.getElementById('showHideBtn');
        const vocabOptionsContainer = document.getElementById('vocabOptionsContainer');

        let currentIndex = 0;
        let showAnswer = true;
        let isPlaying = false;

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function updateVocabDisplay() {
            if (sentenceNumber) sentenceNumber.value = currentIndex + 1;
            if (vocabIndicator) {
                vocabIndicator.style.background = '#ffffe0';
                vocabIndicator.innerHTML = showAnswer ? `
                    <div style="font-size: 20px; font-weight: normal; color: #38761d;">${sentences[currentIndex].translation}</div>
                ` : '';
            }
            updateVocabOptions();
            playCurrentSentence();
        }

        function updateVocabOptions() {
            if (vocabOptionsContainer) {
                vocabOptionsContainer.innerHTML = '';
                const shuffledOptions = shuffleArray(sentences[currentIndex].options);
                shuffledOptions.forEach(option => {
                    const btn = document.createElement('button');
                    btn.className = 'optionBtn';
                    btn.textContent = option;
                    btn.onclick = () => checkVocabAnswer(option);
                    vocabOptionsContainer.appendChild(btn);
                });
            }
        }

        function playCurrentSentence() {
            if (isPlaying) vocabAudio.pause();
            [prevBtn, nextBtn, replayBtn, showHideBtn].forEach(btn => btn && btn.classList.add('disabled'));
            if (sentenceNumber) sentenceNumber.disabled = true;
            isPlaying = true;
            vocabAudio.src = sentences[currentIndex].audioFile;
            vocabAudio.currentTime = sentences[currentIndex].start;
            vocabAudio.play().catch(error => {
                console.error('Audio playback failed:', error);
                alert('Vui lòng nhấn nút “再听一遍” để phát âm thanh.');
                [prevBtn, nextBtn, replayBtn, showHideBtn].forEach(btn => btn && btn.classList.remove('disabled'));
                if (sentenceNumber) sentenceNumber.disabled = false;
                isPlaying = false;
            });

            vocabAudio.ontimeupdate = () => {
                if (vocabAudio.currentTime >= sentences[currentIndex].end) {
                    vocabAudio.pause();
                    vocabAudio.ontimeupdate = null;
                    [prevBtn, nextBtn, replayBtn, showHideBtn].forEach(btn => btn && btn.classList.remove('disabled'));
                    if (sentenceNumber) sentenceNumber.disabled = false;
                    isPlaying = false;
                }
            };
        }

        function moveSentence(direction) {
            currentIndex = (currentIndex + direction + sentences.length) % sentences.length;
            updateVocabDisplay();
        }

        function checkVocabAnswer(selectedAnswer) {
            const correctAnswer = sentences[currentIndex].correctAnswer;
            const optionButtons = vocabOptionsContainer.getElementsByClassName('optionBtn');

            for (let btn of optionButtons) {
                btn.classList.remove('correct', 'wrong');
                if (btn.textContent === selectedAnswer) {
                    if (selectedAnswer === correctAnswer) {
                        vocabIndicator.style.background = '#B7D7AA';
                        btn.classList.add('correct');
                        correctAudio.play().catch(error => console.error('Correct audio playback failed:', error));
                        correctAudio.onended = () => {
                            setTimeout(() => moveSentence(1), 200);
                        };
                    } else {
                        vocabIndicator.style.background = '#CE6D5E';
                        btn.classList.add('wrong');
                        wrongAudio.play().catch(error => console.error('Wrong audio playback failed:', error));
                        wrongAudio.onended = null;
                    }
                }
            }
        }

        if (prevBtn) {
            prevBtn.onclick = () => {
                if (!isPlaying) moveSentence(-1);
            };
        }

        if (nextBtn) {
            nextBtn.onclick = () => {
                if (!isPlaying) moveSentence(1);
            };
        }

        if (replayBtn) {
            replayBtn.onclick = () => {
                if (!isPlaying) playCurrentSentence();
            };
        }

        if (showHideBtn) {
            showHideBtn.onclick = () => {
                if (!isPlaying) {
                    showAnswer = !showAnswer;
                    showHideBtn.classList.toggle('active-mode');
                    updateVocabDisplay();
                }
            };
        }

        if (sentenceNumber) {
            sentenceNumber.onchange = () => {
                if (!isPlaying) {
                    const num = parseInt(sentenceNumber.value) - 1;
                    if (!isNaN(num) && num >= 0 && num < sentences.length) {
                        currentIndex = num;
                        updateVocabDisplay();
                    } else {
                        alert(`输入范围： 1 到 ${sentences.length}`);
                        updateVocabDisplay();
                    }
                }
            };

            sentenceNumber.onkeydown = (e) => {
                if (!isPlaying) {
                    if (e.key === 'ArrowLeft') moveSentence(-1);
                    if (e.key === 'ArrowRight') moveSentence(1);
                }
            };
        }

        function initVocab() {
            currentIndex = 0;
            showAnswer = true;
            isPlaying = false;
            updateVocabDisplay();
        }

        // Xử lý câu hỏi
        let contentScrollPosition = 0;
        let quizScrollPosition = 0;
        let vocabScrollPosition = 0;
        let userSelections = {};
        let isSubmitted = false;

        function loadQuiz() {
            const questionsDiv = document.getElementById('questions');
            if (questionsDiv) {
                questionsDiv.innerHTML = '';
                quizData.forEach((item, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'question';
                    const questionTitle = document.createElement('h3');
                    questionTitle.textContent = `Câu ${index + 1}: ${item.question}`;
                    questionDiv.appendChild(questionTitle);

                    const optionsDiv = document.createElement('div');
                    optionsDiv.className = 'options';
                    item.options.forEach(option => {
                        const label = document.createElement('label');
                        const isChecked = userSelections[`question${index}`] === option ? 'checked' : '';
                        label.innerHTML = `
                            <input type="radio" name="question${index}" value="${option}" ${isChecked}>
                            ${option}
                        `;
                        optionsDiv.appendChild(label);
                    });

                    questionDiv.appendChild(optionsDiv);
                    questionsDiv.appendChild(questionDiv);
                });
                window.scrollTo(0, quizScrollPosition);
            }
        }

        function saveSelections() {
            quizData.forEach((_, index) => {
                const selected = document.querySelector(`input[name="question${index}"]:checked`);
                if (selected) {
                    userSelections[`question${index}`] = selected.value;
                }
            });
        }

        function checkAnswers() {
            let score = 0;
            const total = quizData.length;
            let wrongAnswers = [];
            quizData.forEach((item, index) => {
                const selected = document.querySelector(`input[name="question${index}"]:checked`);
                if (selected) {
                    if (selected.value === item.correct) {
                        score++;
                    } else {
                        wrongAnswers.push({
                            question: item.question,
                            selected: selected.value,
                            correct: item.correct
                        });
                    }
                } else {
                    wrongAnswers.push({
                        question: item.question,
                        selected: "未选择",
                        correct: item.correct
                    });
                }
            });

            const resultDiv = document.getElementById('result');
            if (resultDiv) {
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = `
                    <h3>YD-AUOHN-结果: ${score}/${total} 答案正确</h3>
                    <p>比例: ${(score/total * 100).toFixed(2)}%</p>
                `;
                if (wrongAnswers.length > 0) {
                    resultDiv.innerHTML += '<h4>错误答案:</h4>';
                    wrongAnswers.forEach((wrong, index) => {
                        resultDiv.innerHTML += `
                            <div class="wrong-answer">
                                Câu ${quizData.findIndex(q => q.question === wrong.question) + 1}: ${wrong.question}<br>
                                你的选择: ${wrong.selected} - 正确答案: ${wrong.correct}
                            </div>
                        `;
                    });
                } else {
                    resultDiv.innerHTML += '<p>回答正确所有问题</p>';
                }
                resultDiv.scrollIntoView({ behavior: 'smooth' });
                isSubmitted = true;
            }
        }

        // Xử lý chế độ hiển thị
        const contentModeButton = document.getElementById('contentMode');
        const quizModeButton = document.getElementById('quizMode');
        const vocabModeButton = document.getElementById('vocabMode');
        const contentContainer = document.getElementById('contentContainer');
        const quizContainer = document.getElementById('quizContainer');
        const vocabContainer = document.getElementById('vocabContainer');
        const vocabControls = document.getElementById('vocabControls');

        if (contentModeButton) {
            contentModeButton.addEventListener('click', () => {
                quizScrollPosition = window.scrollY;
                vocabScrollPosition = window.scrollY;
                saveSelections();
                contentContainer.style.display = 'block';
                quizContainer.style.display = 'none';
                vocabContainer.style.display = 'none';
                vocabControls.style.display = 'none';
                contentModeButton.classList.add('active');
                quizModeButton.classList.remove('active');
                vocabModeButton.classList.remove('active');
                floatingControls.style.display = 'block';
                renderText();
                renderImage();
                window.scrollTo(0, contentScrollPosition);
            });
        }

        if (quizModeButton) {
            quizModeButton.addEventListener('click', () => {
                contentScrollPosition = window.scrollY;
                vocabScrollPosition = window.scrollY;
                saveSelections();
                contentContainer.style.display = 'none';
                quizContainer.style.display = 'block';
                vocabContainer.style.display = 'none';
                vocabControls.style.display = 'none';
                quizModeButton.classList.add('active');
                contentModeButton.classList.remove('active');
                vocabModeButton.classList.remove('active');
                floatingControls.style.display = 'none';
                if (isSubmitted) {
                    userSelections = {};
                    isSubmitted = false;
                }
                loadQuiz();
            });
        }

        if (vocabModeButton) {
            vocabModeButton.addEventListener('click', () => {
                contentScrollPosition = window.scrollY;
                quizScrollPosition = window.scrollY;
                saveSelections();
                contentContainer.style.display = 'none';
                quizContainer.style.display = 'none';
                vocabContainer.style.display = 'block';
                vocabControls.style.display = 'block';
                vocabModeButton.classList.add('active');
                contentModeButton.classList.remove('active');
                quizModeButton.classList.remove('active');
                floatingControls.style.display = 'none';
                initVocab();
                window.scrollTo(0, vocabScrollPosition);
            });
        }

        // Khởi tạo
        document.addEventListener('DOMContentLoaded', () => {
            renderText();
            renderImage();
            contentContainer.style.display = 'block';
            quizContainer.style.display = 'none';
            vocabContainer.style.display = 'none';
            vocabControls.style.display = 'none';
        });
    </script>
</body>
</html>
